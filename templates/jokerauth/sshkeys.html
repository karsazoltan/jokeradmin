{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block navbar %}
    <nav class="nav" style="background-color: white; padding: 10px;">
        <a class="nav-link" aria-current="page" href="{% url 'home' %}">Home</a>
        {% if user.is_authenticated %}
            <a class="nav-link active" href="{% url 'sshkeys' %}">SSH Keys</a>
            <a class="nav-link" href="{% url 'projects' %}">Projects</a>
        {% endif %}
        <div style="float: right">
            {% if user.is_authenticated %}
                <i>Hi <b>{{ user.username }}</b>!</i>
                <a class="nav-link" href="{% url 'logout' %}">Log Out</a>
            {% else %}
                <i>You are not logged in</i>
                <a class="nav-link" href="{% url 'login' %}">Log In</a>
            {% endif %}
        </div>
    </nav>
{% endblock %}

{% block content %}
    <h1>SSH Keys</h1>
    <h2>Key</h2>
    <table class="table">
    {% for key in keys %}
        <tr>
            <td>{{ key.comment }}</td>
            <td>{{ key.create_date }}</td>
            <td><button type="button" class="btn btn-primary" onclick="alert('{{ key.pubkey }}')">Show key</button></td>
            <td><a href="{% url 'activatekey' key.id %}">
                {% if key.active %}
                    <button type="button" class="btn btn-warning">Deactivate</button>
                {% else %}
                    <button type="button" class="btn btn-success">Activate</button>
                {% endif %}
            </a></td>
            <td><a href="{% url 'deletekey' key.id %}"><button type="button" class="btn btn-danger">Delete</button></a></td>
        </tr>
    {% empty %}
        empty
    {% endfor %}
    </table>
    <h2>Add public key</h2>
    <form action="{% url 'sshkeys' %}" method="post">
        <div class="form-group">
            {% csrf_token %}
            <table class="table">
                {{ form.as_table }}
            </table>
            <input type="submit" value="Submit" class="btn btn-primary">
        </div>
    </form>
{% endblock %}